## Курс Route256 


### 1. Рассчет стоимсти доставки (MVP)

#### Бизнес потребность
Необходим функционал расчета стоимости доставки груза на расстояние 1 км. Стоимость доставки определяется суммарным объемом грузов всех грузов, умноженным на коэффициент 3.27 (для см2).
Параметры расчета и результаты расчета должны сохраняться во временное хранилище.

#### Системный анализ
Нужен WebApi-сервис для расчета стоимости доставки груза.
1. Необходим метод расчета, который принимает список товара с их размерами (в мм), и возвращает стоимость доставки.
2. Каждый запрос должен сохраняться — в истории изменения необходимо иметь объем и стоимость.
3. Должна быть возможность получения истории запросов с сортировкой от последнего к первому.


Контакт рассчета стоимости 
```
HTTP POST /v1/delivery-price/caclulate
  Request Json : {
    goods: [
      {
        length: 0,
        width: 0,
        height: 0,
      }, ...
    
    ]
  }
  Response Json : {
     price: 0.0
  }
```
  Контакт получения истории рассчетов
```
  HTTP POST /v1/delivery-price/get-history
  Request Json : {
    Take: 0
  }
  Response Json 200 : 
   cargos: [{
    valume: 0.0,
    price: 0.0
  
  }, ... ]
```


### 2. Учет веса товаров при расчете стоимости доставки

#### Бизнес потребность
При расчёте стоимости доставки необходимо учитывать вес груза (в граммах). Стоимость доставки — суммарный вес груза умноженный на 1.34 (для 1 кг).
Итоговая стоимость доставки — наибольшая цена: либо рассчитанная по весу, либо по объему.

#### Системный анализ
• Пользователь вводит вес в кг - нужно пересчитывать в граммы
• Итоговая стоимость - наибольшая из стоимостей (по весу или по объему).
• Требуется обратная совместимость
• Реализуем новые методы


Контакт рассчета стоимости 
```
HTTP POST /v2/delivery-price/caclulate
  Request Json : {
    goods: [
      {
        length: 0,
        width: 0,
        height: 0,
        weight: 0
      }, ...
    
    ]
  }
  Response Json : {
     price: 0.0
  }
```
  Контакт получения получения истории рассчетов
```
  HTTP POST /v2/delivery-price/get-history
  Request Json : {
    Take: 0
  }
  Response Json 200 : 
   cargos: [{
    {
    valume: 0.0,
    weight: 0.0
     },
   price: 0.0
  }

... ]
```


### 3. Учет расстояния доставки при рассчете стоимочти доставки

#### Бизнес потребность
Необходимо учитывать расстояние доставки, на которое нужно перевести грузы (в метрах). Так же необходим функционал очистки истории вычисления.
Привести все величины в СИ.

#### Системный анализ
• В пп.1,2 был разработан метод расчета стоимости доставки на расстояние 1 км. Теперь нужно учитывать указанное клиентом расстояние. Расстояние указывается в метрах
• Расстояние не может быть меньше 1 м.
• Необходим метод очистки истории расчетов.
• Все величины должны быть в единицах измерения СИ


Контакт рассчета стоимости 
```
HTTP POST /v3/delivery-price/caclulate
  Request Json : {
    goods: [
      {
        length: 0,
        width: 0,
        height: 0,
        weight: 0
      }, ... ],
    distance: 0
  }
  Response Json : {
     price: 0.0
  }
```
  Контакт получения истории рассчетов 
```
  HTTP POST /v3/delivery-price/get-history
  Request Json : {
    Take: 0
  }
  Response Json 200 : 
   cargos: [{
    {
    valume: 0.0,
    weight: 0.0
     },
   price: 0.0,
   distance: 0
  }

... ]
```

  Контакт получения очистки итории рассчетов 
```
  HTTP POST /v3/delivery-price/delete-history
  Request Json : {}
  Response Json 200 : {}

```


### Дополнительное задание (2 алмаза)
Нужно получить аналитические данные:
• Наибольший объем / вес товара
• Расстояние, на которое был перевезен товар с наибольшим объемом
• Расстояние, на которое был перевезен товар с наибольшим весом
• Средневзвешенная стоимость доставки, где вес определяется количеством товаров (чем больше товаров, тем больше вес).

#### Системный анализ
• max_weight - наибольший вес товара
• max_volume - наибольший объем товара
• max_distance_for_heaviest_good - расстояние, на которое был перевезен товар с наибольшим объемом
• max_distance_for_largest_good - расстояние, на которое был перевезен товар с наибольшим весом
• wavg_price - средневзвешенная стоимость доставки

Контакт получения данных аналитики
```
  HTTP POST /v3/delivery-price/reports
  Request Json : {}
  Response Json 200 : {
  max_weight: 0,
  max_volume: 0,
  max_distance_for_heaviest_good: 0,
  max_distance_for_largest_good: 0,
  wavg_price: 0.0
}

```



